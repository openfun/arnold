{% if endpoint_mongodb_ip | ipaddr != false %}
apiVersion: v1
kind: Endpoints
metadata:
  labels:
    app: learninglocker
    endpoint: mongodb
    deployment_stamp: "{{ deployment_stamp }}"
  # name of the endpoint should be the same as the corresponding service
  name: "learninglocker-mongodb-{{ deployment_stamp }}"
  namespace: "{{ project_name }}"
subsets:
  - addresses:
    - ip: "{{ endpoint_mongodb_ip }}"
    ports:
    - port: "{{ learninglocker_mongodb_port }}"
      name: "{{ learninglocker_mongodb_port}}-tcp"
{% endif %}
